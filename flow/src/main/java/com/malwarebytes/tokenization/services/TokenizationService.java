/*
 * Copyright 2019 Malwarebytes. All Rights Reserved.
 *
 * This software is the proprietary information of Malwarebytes.
 * Use is subject to license terms.
 */
package com.malwarebytes.tokenization.services;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.malwarebytes.tokenization.beans.CreditCardRequest;
import com.malwarebytes.tokenization.beans.CreditCardTokenBean;
import com.malwarebytes.tokenization.entities.TokenizationHash;
import com.malwarebytes.tokenization.util.EncryptionUtil;
import com.malwarebytes.tokenization.util.JsonHelper;
/**
 * Tokenization Service that implements the Business logic.
 * 
 *
 * @author Kiran Kanaparthi
 * @since July 21, 2019
 */
@Service
public class TokenizationService implements ITokenizationService {

//    @Autowired
//    private RedisRepository redisRepository;
    
    @Autowired
    private EncryptionUtil encryptionUtil;

    /**
     * 
     */
    public TokenizationHash tokenizeData(String transactionId,CreditCardTokenBean request) {
    	String token = encryptionUtil.encrypt(JsonHelper.convertJavaToJson(request));
    	TokenizationHash hash = new TokenizationHash(transactionId,token);
//    	redisRepository.save(hash);
    	return hash;
    }
    
    
    /**
     * 
     */
    public String extractTokenizedData(String token) {
    	String decryptedData = null;
    	return decryptedData;
    }
    
}
